<div class="container my-4">

  <!-- Success Alert -->
  <div *ngIf="successMsg" class="alert alert-success text-center">
    {{ successMsg }}
  </div>

  <!-- Error Alert -->
  <div *ngIf="errorMsg" class="alert alert-danger text-center">
    {{ errorMsg }}
  </div>

  <!-- Selected Product Section -->
  <div *ngIf="selectedProduct" class="card mb-4 shadow-lg">
    <div class="row g-0">
      <div class="col-md-4">
        <img 
          [src]="selectedProduct.imageUrl || 'https://via.placeholder.com/400x300?text=Product+Image'" 
          class="img-fluid rounded-start product-large-img"
          alt="{{ selectedProduct.name }}"
        >
      </div>

      <div class="col-md-8">
        <div class="card-body">
          <h2 class="card-title">{{ selectedProduct.name }}</h2>
          <p class="text-muted">{{ selectedProduct.description || 'No description available.' }}</p>
          <h3 class="text-primary mb-4">₹ {{ selectedProduct.price }}</h3>

          <button class="btn btn-outline-primary me-2" (click)="editProduct(selectedProduct.id)">Edit</button>
          <button class="btn btn-danger me-2" (click)="deleteProduct(selectedProduct.id)">Delete</button>
          <button class="btn btn-secondary" (click)="closeDetails()">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Header & Create Product -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="fw-bold">All Products</h2>

    <button routerLink="/products/create" class="btn btn-success">
      + Create Product
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="text-center py-4">
    <div class="spinner-border text-primary"></div>
  </div>

  <!-- Product Grid -->
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
    <div *ngFor="let product of products" class="col">
      <div class="card h-100 shadow-sm product-card">

        <img 
          [src]="product.imageUrl || 'https://via.placeholder.com/300x200?text=Product+Image'" 
          class="card-img-top product-img"
          alt="product image"
        >

        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{ product.name }}</h5>

          <p class="card-text text-truncate small">
            {{ product.description || 'No description available' }}
          </p>

          <div class="mt-auto d-flex justify-content-between align-items-center">
            <span class="badge bg-primary fs-6">₹ {{ product.price }}</span>

            <div>
              <button class="btn btn-sm btn-outline-primary me-2" (click)="viewProduct(product)">
                View
              </button>
              <button class="btn btn-sm btn-outline-secondary me-2" (click)="editProduct(product.id)">
                Edit
              </button>
              <button class="btn btn-sm btn-danger" (click)="deleteProduct(product.id)">
                Delete
              </button>
            </div>
          </div>

        </div>

      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && products.length === 0" class="text-center my-5">
    <p class="lead">No products found. Add a new product to get started.</p>
    <button routerLink="/products/create" class="btn btn-success">Create Product</button>
  </div>

</div>
